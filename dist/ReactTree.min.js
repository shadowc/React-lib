!function(e){var t={};function n(r){if(t[r])return t[r].exports;var a=t[r]={i:r,l:!1,exports:{}};return e[r].call(a.exports,a,a.exports,n),a.l=!0,a.exports}n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:r})},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=16)}([function(e,t){e.exports=React},function(e,t){e.exports=jQuery},function(e,t){e.exports=ReactDOM},function(e,t){e.exports=PropTypes},,,,,function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=s(n(0)),o=s(n(2)),l=s(n(9));function s(e){return e&&e.__esModule?e:{default:e}}var u=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.tree=null,this.id=t.id,this.treeProps=t}return a(e,[{key:"render",value:function(e){this.tree=o.default.render(i.default.createElement(l.default,r({},this.treeProps)),e)}},{key:"setLoading",value:function(e){this.tree.setLoading(e)}},{key:"setData",value:function(e){this.tree.setData(e)}},{key:"getSelectedItemId",value:function(){return this.tree.getSelectedItemId()}},{key:"addItem",value:function(e){this.tree.addItem(e)}},{key:"updateItem",value:function(e){this.tree.updateItem(e)}},{key:"deleteItemByI",value:function(e){this.tree.deleteItemById(e)}},{key:"findItemById",value:function(e){return this.tree.findItemById(e)}},{key:"setEnabled",value:function(e){this.tree.setEnabled(e)}},{key:"expandAll",value:function(){this.tree.expandAll()}},{key:"contractAll",value:function(){this.tree.contractAll()}}]),e}();t.default=u},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=l(n(1)),i=l(n(0)),o=l(n(3));function l(e){return e&&e.__esModule?e:{default:e}}var s=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={root:n.props.initialData,expandedIds:{},loading:!1,selectedItem:null,enabled:!0},n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,i.default.Component),r(t,[{key:"render",value:function(){return i.default.createElement("div",{id:this.props.id,className:this.state.enabled?"":"disabled"},this.state.loading?i.default.createElement("span",{className:"icon loading"},"Â "):i.default.createElement("ul",null,this.state.root.map(this.renderItem.bind(this))))}},{key:"renderItem",value:function(e){var t=this.state.expandedIds[e.id],n=this.state.selectedItem===e.id?"selected":"",r=t?"expanded":"contracted",a="expand "+(e.children.length?r:"");return i.default.createElement("li",{key:e.id},i.default.createElement("span",{className:a,onClick:this.expandContractItem.bind(this,e.id)}),i.default.createElement("span",{className:n,onClick:this.selectItem.bind(this,e.id)},this.props.format.call(null,e)),e.children.length?i.default.createElement("ul",{style:{display:t?"block":"none"}},e.children.map(this.renderItem.bind(this))):null)}},{key:"setLoading",value:function(e){this.setState({loading:e})}},{key:"setData",value:function(e){var t=this;(!(arguments.length>1&&void 0!==arguments[1])||arguments[1])&&function e(n){n.forEach(function(t){t.children.length&&e(t.children)}),t.sort(n)}(e),this.setState({root:e})}},{key:"sort",value:function(e){var t=this.props.sort;"function"==typeof t&&e.sort(t)}},{key:"selectItem",value:function(e,t){if(this.state.enabled){var n=this.state.selectedItem===e?null:e;return this.setState({selectedItem:n}),this.generateItemClick(t,n)}return t.preventDefault(),null}},{key:"getSelectedItemId",value:function(){return this.state.selectedItem}},{key:"expandContractItem",value:function(e,t){if(t.preventDefault(),this.state.enabled){var n=Object.assign({},this.state.expandedIds);n[e]?delete n[e]:n[e]=!0,this.setState({expandedIds:n})}}},{key:"generateItemClick",value:function(e,t){e.preventDefault(),e.stopPropagation();var n=new CustomEvent("ItemClick",{detail:{selectedItem:t}}),r=document.getElementById(this.props.id);return r&&r.dispatchEvent(n),!1}},{key:"addItem",value:function(e){var t=this.replicateRoot();if(void 0!==e.id&&void 0!==e.parentId&&void 0!==e.children)if("0"===e.parentId||0===e.parentId)t.push(e),this.sort(t);else{var n=this.findItemInBranchById(t,e.parentId);n?(n.children.push(e),this.sort.branch()):(t.push(e),this.sort(t))}this.setState({root:t})}},{key:"updateItem",value:function(e){var t=this.replicateRoot(),n=this.findItemInBranchById(t,e.id);n&&Object.keys(n).forEach(function(t){"id"!==t&&"parentId"!==t&&"children"!==t&&(n[t]=e[t]?e[t]:null)}),this.sort(t),this.setState({root:t})}},{key:"deleteItemById",value:function(e){var t=this.replicateRoot(),n=this.findItemById(e),r=this.state.selectedItem,a=void 0;if(n&&(a=0===n.parentId||"0"===n.parentId?t:this.findItemInBranchById(t,n.parentId).children,r===n.id&&(r=null)),a)for(var i=0;i<a.length;i++)if(a[i].id===e){a.splice(i,1);break}this.setState({root:t,selectedItem:r})}},{key:"findItemById",value:function(e){return this.findItemInBranchById(this.state.root,e)}},{key:"findItemInBranchById",value:function(e,t){for(var n=null,r=0;r<e.length;r++){var a=e[r];if(a.id===t){n=a;break}if(a.children.length&&null!==(n=this.findItemInBranchById(a.children,t)))break}return n}},{key:"replicateRoot",value:function(){for(var e=[],t=0;t<this.state.root.length;t++)e.push(a.default.extend({},this.state.root[t]));return e}},{key:"setEnabled",value:function(e){this.setState({enabled:e})}},{key:"expandAll",value:function(){var e={};!function e(t,n){t.forEach(function(t){t.children.length&&(n[t.id]=!0,e(t.children,n))})}(this.state.root,e),this.setState({expandedIds:e})}},{key:"contractAll",value:function(){this.setState({expandedIds:{}})}}]),t}();t.default=s,s.propTypes={id:o.default.string,format:o.default.func.isRequired,initialData:o.default.arrayOf(o.default.instanceOf(Object)),sort:o.default.func},s.defaultProps={id:"tree",initialData:[],sort:null}},,,,,,,function(e,t,n){"use strict";var r,a=n(8),i=(r=a)&&r.__esModule?r:{default:r};void 0===window.ReactLib&&(window.ReactLib={}),window.ReactLib.Tree=i.default}]);